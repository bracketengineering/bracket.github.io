<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Macro Data - Bracket Engineering Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../frontend/frontend_prefix.html"><strong aria-hidden="true">1.</strong> Frontend</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../frontend/api/cognito.html"><strong aria-hidden="true">1.1.</strong> Cognito Via Amplify</a></li><li class="chapter-item expanded "><a href="../../frontend/api/api_caller.html"><strong aria-hidden="true">1.2.</strong> API Caller</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../frontend/api/generic_call.html"><strong aria-hidden="true">1.2.1.</strong> #genericCall()</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../backend/backend_prefix.html"><strong aria-hidden="true">2.</strong> Backend</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../backend/infrastructure.html"><strong aria-hidden="true">2.1.</strong> Infrastructure</a></li><li class="chapter-item expanded "><a href="../../backend/cicd/cicd.html"><strong aria-hidden="true">2.2.</strong> CI/CD</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../backend/cicd/setup.html"><strong aria-hidden="true">2.2.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../../backend/cicd/example_template.html"><strong aria-hidden="true">2.2.2.</strong> Exmample Template</a></li></ol></li><li class="chapter-item expanded "><a href="../../backend/neptune/neptune.html"><strong aria-hidden="true">2.3.</strong> Neptune</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../backend/neptune/design_proposal.html"><strong aria-hidden="true">2.3.1.</strong> Design Proposal</a></li><li class="chapter-item expanded "><a href="../../backend/neptune/neptune_design.html"><strong aria-hidden="true">2.3.2.</strong> Database Schema</a></li><li class="chapter-item expanded "><a href="../../backend/neptune/neptune_api_design.html"><strong aria-hidden="true">2.3.3.</strong> API Design</a></li><li class="chapter-item expanded "><a href="../../backend/neptune/neptune_client.html"><strong aria-hidden="true">2.3.4.</strong> Neptune Client</a></li><li class="chapter-item expanded "><a href="../../backend/neptune/neptune_macros.html" class="active"><strong aria-hidden="true">2.3.5.</strong> Macro Data</a></li></ol></li><li class="chapter-item expanded "><a href="../../backend/data_analytics/data_analytics.html"><strong aria-hidden="true">2.4.</strong> Data Analytics</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Bracket Engineering Docs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="neptune-macros"><a class="header" href="#neptune-macros">Neptune Macros <!-- omit from toc --></a></h1>
<h2 id="contents"><a class="header" href="#contents">Contents <!-- omit from toc --></a></h2>
<ul>
<li><a href="#data-sources">Data Sources</a>
<ul>
<li><a href="#quadram-institute-cofid">Quadram Institute CoFID</a></li>
<li><a href="#nutritionix-common-uk-foods-database">Nutritionix Common UK Foods Database</a></li>
<li><a href="#openfoodfacts-database">OpenFoodFacts Database</a></li>
</ul>
</li>
<li><a href="#method-of-data-collectioncleaning">Method of Data Collection/Cleaning</a></li>
</ul>
<h2 id="data-sources"><a class="header" href="#data-sources">Data Sources</a></h2>
<h3 id="quadram-institute-cofid"><a class="header" href="#quadram-institute-cofid">Quadram Institute CoFID</a></h3>
<p>Information <a href="https://quadram.ac.uk/UKfoodcomposition/">here</a></p>
<ul>
<li>Free to use commercially with government license
<ul>
<li>Only have to state source and reference <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">this license</a></li>
</ul>
</li>
<li>Contains 3,200 common food items.</li>
<li>Available for bulk download as Excel spreadsheet.</li>
</ul>
<h3 id="nutritionix-common-uk-foods-database"><a class="header" href="#nutritionix-common-uk-foods-database">Nutritionix Common UK Foods Database</a></h3>
<p>Information <a href="https://www.nutritionix.com/database">here</a></p>
<ul>
<li>Contains 10,500 foods (with 38,000 names, so some foods with multiple names)</li>
<li>Available for bulk download with price quoted on request.</li>
<li>To gauge idea of bulk price, cheapest paid API access is $500 per month.</li>
<li>There is however a free tier which allows access to barcode scanning and the database, with attribution required.</li>
</ul>
<h3 id="openfoodfacts-database"><a class="header" href="#openfoodfacts-database">OpenFoodFacts Database</a></h3>
<ul>
<li>Has a significant advantage in that it is linked to barcodes, which may allow us to replicate the functionality of MyFitnessPal.</li>
<li>Contains nearly 3 million products across many countries.</li>
<li>Free to use commercially, with attribution required and under <a href="https://opendatacommons.org/licenses/odbl/1-0/">this license</a></li>
</ul>
<h2 id="method-of-data-collectioncleaning"><a class="header" href="#method-of-data-collectioncleaning">Method of Data Collection/Cleaning</a></h2>
<ul>
<li>When uploading a meal, upload its ingredients (if they don't exist) to neptune, getting the macro information from our data source(s) to do so.
<ul>
<li><strong>Why not upload macros &amp; ingredients in bulk?</strong> </li>
<li>It is likely we will only ever utilise a small portion of the databases we reference for macros, so populating Neptune with a load of unused data will be wasteful and pointless. For example, when discussing chicken breast, we only want standard versions like &quot;raw&quot;, &quot;skin on&quot;, etc, rather than specific versions like &quot;cooked in broth&quot;.</li>
</ul>
</li>
<li>Use our ChatGPT API setup to standardise ingredient names, and match ingredients from recipes to those in the datasets.</li>
<li>Make links between meal/ingredients and macros to specify the quantity they contain.</li>
<li>By structuring the data as links between Meal, Ingredient and Nutrient nodes, with edge values being quantities involved, we can extract and return information in the format required by the frontend (pasted below for reference).</li>
<li><strong>For reference</strong>: All nutrient information for all ingredients will be standardised to <strong>&quot;per 100g&quot;</strong> for ease of processing.</li>
</ul>
<pre><code class="language-typescript">interface NeptuneIngredient {
  itemID: NeptuneID;
  macroData: Array&lt;NeptuneMacro&gt;;
}

interface NeptuneMacro {
  itemID: NeptuneID;
  macroName: string;
  quantity: number;
  unit: string;
}

// UUID of item in neptune
type NeptuneID = string;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../backend/neptune/neptune_client.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../backend/data_analytics/data_analytics.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../backend/neptune/neptune_client.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../backend/data_analytics/data_analytics.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
